set nocompatible
set noswapfile

let mapleader=","

" -----------------------------------------------------------------
"  Set colorscheme
" -----------------------------------------------------------------
syntax enable
colorscheme desert256

" -----------------------------------------------------------------
"  Text Formatting
" -----------------------------------------------------------------
autocmd FileType * set tabstop=2|set shiftwidth=2|set expandtab 
autocmd FileType python set tabstop=4|set shiftwidth=4|set expandtab
autocmd FileType make set tabstop=8|set shiftwidth=8|set noexpandtab 

set number

" -----------------------------------------------------------------
"  Remapping
" -----------------------------------------------------------------
map <F2> :retab <CR> :wq! <CR>

" -----------------------------------------------------------------
"  Load external modules
" -----------------------------------------------------------------
call pathogen#infect()

" Automatically read file changes from disk
set autoread

" -----------------------------------------------------------------
" NERDTree configuration
" -----------------------------------------------------------------
map <Leader>nt :NERDTreeToggle<CR>
augroup AuNERDTreeCmd
autocmd AuNERDTreeCmd FocusGained * call s:UpdateNERDTree()

function s:UpdateNERDTree(...)
  let stay = 0

  if(exists("a:1"))
    let stay = a:1
  end

  if exists("t:NERDTreeBufName")
    let nr = bufwinnr(t:NERDTreeBufName)
    if nr != -1
      exe nr . "wincmd w"
      exe substitute(mapcheck("R"), "<CR>", "", "")
      if !stay
        wincmd p
      end
    endif
  endif
endfunction
